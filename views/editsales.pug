extends layout2.pug 

block content
  // Main wrapper
  div(style="width: 100%; height: 100vh; display: flex; flex-direction: row;")

    // Sidebar (25%)
    div(style="width: 25%; height: 100%;")
      include includes/sidebar2.pug

    // Main content (75%)
    div(style="width: 75%; padding: 20px; overflow-y: auto;")  
      .container.mt-5
        .topbar
          .toggle
            ion-icon(name="menu-outline")
        h2.mb-4.text-center Edit Sale Form
        
        //- h2 Sale Entry Form
        form#saleForm(action=`/editsale/${sale._id}?_method=PUT`, method="post")
          .row.g-3
            .col-md-6
              label.form-label(for='customerName') Customer Name
              input#customerName.form-control(type='text' name='customerName' value=`${sale.customerName}` placeholder='Enter Customer Name' required='')
            .col-md-6
              label.form-label(for='productName') Product Name
              select#productName.form-select(name='productName' required='' value=`${sale.productName}`)
                if stocks.length 
                  each stock in stocks 
                    option(value=stock.productName)= stock.productName
            .col-md-6
              label.form-label(for='productType') Type of Product
              select#productType.form-select(name='productType' required='')
                option(value=`${sale.productType}` selected='') #{sale.productType}
                option(value='Wood') Wood
                option(value='Furniture') Furniture
            .col-md-6
              label.form-label(for='quantity') Quantity
              input#quantity.form-control(type='number' name='quantity' min='1'  value=`${sale.quantity}` placeholder='Enter quantity' required='')
            .col-md-6
              label.form-label(for='unitPrice') Unit Price (UGX)
              input#unitPrice.form-control(type='number' name='unitPrice' min="1" value=`${sale.unitPrice}` placeholder='Enter unit price' required='')
            .col-md-6
              label.form-label(for='totalPrice') Total Price (UGX)
              input#totalPrice.form-control(type='text' name='totalPrice' readonly='' value=`${sale.totalPrice}`)
            .col-md-6
              label.form-check-label(for='transportCheck') Add 5% Transport Fee
              input#transportCheck.form-check-input(type='checkbox' name='transportCheck' checked=sale.transportCheck ? true : false )
            .col-md-6
              label.form-label(for='paymentType') Type of Payment
              select#paymentType.form-select(name='paymentType' required='')
                option(value=`${sale.paymentType}` selected='' ) #{sale.paymentType}
                option(value='Cash') Cash
                option(value='Cheque') Cheque
                option(value='Bank Overdraft') Bank Overdraft
            .col-md-6
              label.form-label(for='paymentDate') Date
              input#paymentDate.form-control(type='date' name='paymentDate' value=`${moment(sale.paymentDate).format("YYYY-MM-DD")}`   required='')
            .col-12
              button.btn.btn-dark(type='submit') Update Sale

      footer.text-center.py-3.mt-5
        p &copy; 2025 Mayondo Wood and Furniture (MWF). All Rights Reserved.

  script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js')
  script(src='js/sales.js')
  script(src="/js/main.js")
